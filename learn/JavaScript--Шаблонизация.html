<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Шаблонизация</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="Baner.html">Baner</a></p>

<ol>
<li><a href="Baner--Время_и_з-п.html">Время и з/п</a></li>
</ol>
<p><a href="JavaScript.html">JavaScript</a></p>

<ol>
<li><a href="JavaScript--JS_Шаблоны_(Объекты).html">JS Шаблоны (Объекты)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов).html">JS Шаблоны (Шаблоны создания объектов)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов)--Пространство_имен.html">Пространство имен</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Обертки).html">JS Шаблоны (Обертки)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Массивы).html">JS Шаблоны (Массивы)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Определения).html">JS Шаблоны (Функции / Определения)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа).html">JS Шаблоны (Функции / Работа)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Функции_обратного_вызова.html">Функции обратного вызова</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Возврат_функции.html">Возврат функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Самоопределяемые_функции.html">Самоопределяемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Немедленно_вызываемые_функции.html">Немедленно вызываемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Значения,_возвращаемые_немедленно_вызываемыми_функциями.html">Значения, возвращаемые немедленно вызываемыми функциями</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Примеры).html">JS Шаблоны (Функции / Примеры)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(JSON).html">JS Шаблоны (JSON)</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом.html">Работа с DOM деревом</a></li>
<ol>
<li><a href="JavaScript--Работа_с_DOM_деревом--Перемещение_DOM_элементов.html">Перемещение DOM элементов</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом--Создание_DOM_элементов.html">Создание DOM элементов</a></li>
</ol>
<li><a href="JavaScript--Шаблонизация.html">Шаблонизация</a></li>
<li><a href="JavaScript--Конструкторы_и_прототипы.html">Конструкторы и прототипы</a></li>
<li><a href="JavaScript--AJAX.html">AJAX</a></li>
<ol>
<li><a href="JavaScript--AJAX--JSONP.html">JSONP</a></li>
</ol>
<li><a href="JavaScript--!Мысли.html">!Мысли</a></li>
<li><a href="JavaScript--style_js.html">style js</a></li>
<li><a href="JavaScript--console.time.html">console.time</a></li>
<li><a href="JavaScript--documentFragment.html">documentFragment</a></li>
<li><a href="JavaScript--WebWorker.html">WebWorker</a></li>
<li><a href="JavaScript--Вопросы.html">Вопросы</a></li>
<li><a href="JavaScript--Первый_xhr.html">Первый xhr</a></li>
</ol>
<p><a href="JavaScript2015(ES6).html">JavaScript2015(ES6)</a></p>

<ol>
<li><a href="JavaScript2015(ES6)--let_-_const.html">let / const</a></li>
<li><a href="JavaScript2015(ES6)--template_literals.html">template literals</a></li>
<li><a href="JavaScript2015(ES6)--Функции.html">Функции</a></li>
</ol>
<p><a href="Верстка.html">Верстка</a></p>

<ol>
<li><a href="Верстка--Приемы.html">Приемы</a></li>
<ol>
<li><a href="Верстка--Приемы--Многоточие_для_текста.html">Многоточие для текста</a></li>
<li><a href="Верстка--Приемы--Скрыть_текст.html">Скрыть текст</a></li>
</ol>
</ol>
<p><a href="Полезные_ссылки.html">Полезные ссылки</a></p>

<ol>
<li><a href="Полезные_ссылки--Верстка.html">Верстка</a></li>
<ol>
<li><a href="Полезные_ссылки--Верстка--Online_инструменты.html">Online инструменты</a></li>
</ol>
<li><a href="Полезные_ссылки--JavaScript.html">JavaScript</a></li>
</ol>
<p><a href="Словарь.html">Словарь</a></p>

<p><a href="Общее.html">Общее</a></p>

<p><a href="Как_я_ставил_pma.html">Как я ставил pma</a></p>

<p><a href="php.html">php</a></p>

<ol>
<li><a href="php--Вопросы.html">Вопросы</a></li>
<li><a href="php--debug.html">debug</a></li>
<li><a href="php--Форма.html">Форма</a></li>
<li><a href="php--Основы.html">Основы</a></li>
<ol>
<li><a href="php--Основы--Переменные.html">Переменные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Локальные.html">Локальные</a></li>
<li><a href="php--Основы--Переменные--Глобальные.html">Глобальные</a></li>
<li><a href="php--Основы--Переменные--Статические.html">Статические</a></li>
<li><a href="php--Основы--Переменные--Суперглобальные.html">Суперглобальные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Суперглобальные--$_SESSION_and_$_COOKIE.html">$_SESSION and $_COOKIE</a></li>
</ol>
</ol>
<li><a href="php--Основы--Функции.html">Функции</a></li>
<li><a href="php--Основы--Объекты.html">Объекты</a></li>
</ol>
<li><a href="php--MYSQL.html">MYSQL</a></li>
<ol>
<li><a href="php--MYSQL--Начало_работы.html">Начало работы</a></li>
<li><a href="php--MYSQL--Типы_данных.html">Типы данных</a></li>
<li><a href="php--MYSQL--Добавление_данных.html">Добавление данных</a></li>
<li><a href="php--MYSQL--Работа_с_таблицей.html">Работа с таблицей</a></li>
<li><a href="php--MYSQL--Индекс.html">Индекс</a></li>
<li><a href="php--MYSQL--Запросы_к_Базе_Данных.html">Запросы к Базе Данных</a></li>
</ol>
<li><a href="php--PHP_и_MySQL.html">PHP и MySQL</a></li>
</ol></div>
<div class="page"><h1><b><u>Шаблонизация</u></b></h1><strong><span style="color:#1a1a1a;background-color:#ffff00;">Шаблонизация</span></strong><span style="color:#1a1a1a;background-color:#ffff00;"> </span>- <strong>создание однотипных DOM элементов на основе шаблона из структуры однородных данных</strong><br /><br /><strong>Два вида:</strong><br />1. На основе текстового шаблона<br />2. На основе элемента<br /><br />*****************************************<br /><br /><strong><span style="color:#2f3773;">1.</span></strong> <strong><span style="color:#2f3773;">На основе текстового шаблона</span></strong><br /><br /><strong>Конкатенация строки и добавление с помощью innerHTML</strong><br /><br />Пример:<br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">function</span>&nbsp;getElementFromTmpl(data)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">var</span>&nbsp;element&nbsp;=&nbsp;document.createElement(<span style="color:#edd400;font-weight:400">'element'</span>);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;element.innerHTML&nbsp;=&nbsp;<span style="color:#edd400;font-weight:400">'&lt;span&gt;Text&lt;span&gt;'</span>&nbsp;+&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#edd400;font-weight:400">'&lt;div&gt;Text&lt;/div&gt;'</span>&nbsp;+&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#edd400;font-weight:400">'&lt;div&gt;'</span>&nbsp;+&nbsp;data.text&nbsp;+<span style="color:#edd400;font-weight:400">'&lt;/div&gt;'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;element;<br />}</div></div><br />(data - данные их объекта)<br /><br />Более красивый и удобный вариант - это подключить библиотеку для шаблонизации.<br />Например, <strong>handlebars</strong><br /><br />***************************************<br /><br /><strong><span style="color:#2f3773;">2. На основе элемента</span></strong><br /><br />Новый способ. Основывается на новом теге &lt;template&gt;<br /><br /><strong>Например:</strong><br />Разметка шаблона (html)<br /><strong><span style="color:#ff0000;background-color:#add8e6;">style="display: none"</span></strong> - для IE (IE вообще не поддерживает этот тег)<br /><br />Копируемое содержимое берется из тега &lt;template&gt;, <br />контент которого представялет собой DocumentFragment.<br /><div class="codebox"><div class="codebox"><span style="color:#729fcf;font-weight:400">&lt;template</span>&nbsp;<span style="color:#8ae234;font-weight:700">id="hotel-template"</span>&nbsp;<span style="color:#8ae234;font-weight:700">style="display:&nbsp;none"</span><span style="color:#729fcf;font-weight:400">&gt;</span><br />&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;article</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel"</span><span style="color:#729fcf;font-weight:400">&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;span</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-stars"</span><span style="color:#729fcf;font-weight:400">&gt;&lt;/span&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;h3</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-name"</span><span style="color:#729fcf;font-weight:400">&gt;&lt;/h3&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;span</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-rating"</span><span style="color:#729fcf;font-weight:400">&gt;&lt;/span&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;span</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-favourite"</span>&nbsp;<span style="color:#8ae234;font-weight:700">role="checkbox"</span><span style="color:#729fcf;font-weight:400">&gt;&lt;/span&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;ul</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-amenities"</span><span style="color:#729fcf;font-weight:400">&gt;&lt;/ul&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;a</span>&nbsp;<span style="color:#8ae234;font-weight:700">href="#"</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-price"</span><span style="color:#729fcf;font-weight:400">&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;span</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="hotel-price-value"</span><span style="color:#729fcf;font-weight:400">&gt;</span>9700<span style="color:#729fcf;font-weight:400">&lt;/span&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;span</span>&nbsp;<span style="color:#8ae234;font-weight:700">class="rouble"</span><span style="color:#729fcf;font-weight:400">&gt;</span>руб.<span style="color:#729fcf;font-weight:400">&lt;/span&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;/a&gt;</span><br />&nbsp;&nbsp;<span style="color:#729fcf;font-weight:400">&lt;/article&gt;</span><br /><span style="color:#729fcf;font-weight:400">&lt;/template&gt;</span></div></div><br /><br /><br />JavaScript<br /><br /><div class="codebox"><div class="codebox"><span style="color:#888a85;font-weight:400">/*&nbsp;Итерируем&nbsp;все&nbsp;элементы&nbsp;из&nbsp;структуры&nbsp;данных<br />&nbsp;&nbsp;&nbsp;Для&nbsp;этого&nbsp;forEach&nbsp;подойдет<br />&nbsp;&nbsp;&nbsp;В&nbsp;callback&nbsp;вызываем&nbsp;функцию,&nbsp;которая&nbsp;по&nbsp;шаблону&nbsp;подставит&nbsp;данные<br />&nbsp;&nbsp;&nbsp;в&nbsp;шаблон<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;Конечным&nbsp;этапом&nbsp;добавляем&nbsp;все&nbsp;в&nbsp;нужный&nbsp;элемент&nbsp;DOM<br />*/</span><br /><br />arr.forEach(<span style="color:#000000;font-weight:700">function</span>(arrElem)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">var</span>&nbsp;elems&nbsp;=&nbsp;getElementFromTmpl(arrElem);<br />&nbsp;&nbsp;&nbsp;&nbsp;*куда&nbsp;вставить&nbsp;элементы*.appendChild(elems);<br />})<br /><br /><span style="color:#888a85;font-weight:400">//&nbsp;Подставновка&nbsp;в&nbsp;шаблон</span><br /><span style="color:#000000;font-weight:700">function</span>&nbsp;getElementFromTmpl(arrElem)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;Находим&nbsp;шаблон</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">var</span>&nbsp;templateElement&nbsp;=&nbsp;document.querySelector(<span style="color:#edd400;font-weight:400">'#hotel-template'</span>);<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">var</span>&nbsp;element;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">if</span>&nbsp;(<span style="color:#edd400;font-weight:400">'content'</span>&nbsp;<span style="color:#000000;font-weight:700">in</span>&nbsp;templateElement)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;=&nbsp;templateElement.content.querySelector(<span style="color:#edd400;font-weight:400">'.hotel'</span>).cloneNode(<span style="color:#ce5c00;font-weight:400">true</span>);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#000000;font-weight:700">else</span>&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;=&nbsp;templateElement.querySelector(<span style="color:#edd400;font-weight:400">'.hotel'</span>).cloneNode(<span style="color:#ce5c00;font-weight:400">true</span>);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;element.querySelector(<span style="color:#edd400;font-weight:400">'.hotel-name'</span>).textContent&nbsp;=&nbsp;data.<span style="color:#000000;font-weight:700">name</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;и&nbsp;так&nbsp;далее</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;element;<br />}<br /></div></div><br /><br />Свойство <strong>content</strong> у шаблона не работает в IE, поскольку он не поддерживает<br />тэг template. Поэтому для IE нужно писать дополнительную проверку.<br /></div></div>
</body></html>