<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Первый xhr</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="Baner.html">Baner</a></p>

<ol>
<li><a href="Baner--Время_и_з-п.html">Время и з/п</a></li>
</ol>
<p><a href="JavaScript.html">JavaScript</a></p>

<ol>
<li><a href="JavaScript--JS_Шаблоны_(Объекты).html">JS Шаблоны (Объекты)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов).html">JS Шаблоны (Шаблоны создания объектов)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов)--Пространство_имен.html">Пространство имен</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Обертки).html">JS Шаблоны (Обертки)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Массивы).html">JS Шаблоны (Массивы)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Определения).html">JS Шаблоны (Функции / Определения)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа).html">JS Шаблоны (Функции / Работа)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Функции_обратного_вызова.html">Функции обратного вызова</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Возврат_функции.html">Возврат функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Самоопределяемые_функции.html">Самоопределяемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Немедленно_вызываемые_функции.html">Немедленно вызываемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Значения,_возвращаемые_немедленно_вызываемыми_функциями.html">Значения, возвращаемые немедленно вызываемыми функциями</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Примеры).html">JS Шаблоны (Функции / Примеры)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(JSON).html">JS Шаблоны (JSON)</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом.html">Работа с DOM деревом</a></li>
<ol>
<li><a href="JavaScript--Работа_с_DOM_деревом--Перемещение_DOM_элементов.html">Перемещение DOM элементов</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом--Создание_DOM_элементов.html">Создание DOM элементов</a></li>
</ol>
<li><a href="JavaScript--Шаблонизация.html">Шаблонизация</a></li>
<li><a href="JavaScript--Конструкторы_и_прототипы.html">Конструкторы и прототипы</a></li>
<li><a href="JavaScript--AJAX.html">AJAX</a></li>
<ol>
<li><a href="JavaScript--AJAX--JSONP.html">JSONP</a></li>
</ol>
<li><a href="JavaScript--!Мысли.html">!Мысли</a></li>
<li><a href="JavaScript--style_js.html">style js</a></li>
<li><a href="JavaScript--console.time.html">console.time</a></li>
<li><a href="JavaScript--documentFragment.html">documentFragment</a></li>
<li><a href="JavaScript--WebWorker.html">WebWorker</a></li>
<li><a href="JavaScript--Вопросы.html">Вопросы</a></li>
<li><a href="JavaScript--Первый_xhr.html">Первый xhr</a></li>
</ol>
<p><a href="JavaScript2015(ES6).html">JavaScript2015(ES6)</a></p>

<ol>
<li><a href="JavaScript2015(ES6)--let_-_const.html">let / const</a></li>
<li><a href="JavaScript2015(ES6)--template_literals.html">template literals</a></li>
<li><a href="JavaScript2015(ES6)--Функции.html">Функции</a></li>
</ol>
<p><a href="Верстка.html">Верстка</a></p>

<ol>
<li><a href="Верстка--Приемы.html">Приемы</a></li>
<ol>
<li><a href="Верстка--Приемы--Многоточие_для_текста.html">Многоточие для текста</a></li>
<li><a href="Верстка--Приемы--Скрыть_текст.html">Скрыть текст</a></li>
</ol>
</ol>
<p><a href="Полезные_ссылки.html">Полезные ссылки</a></p>

<ol>
<li><a href="Полезные_ссылки--Верстка.html">Верстка</a></li>
<ol>
<li><a href="Полезные_ссылки--Верстка--Online_инструменты.html">Online инструменты</a></li>
</ol>
<li><a href="Полезные_ссылки--JavaScript.html">JavaScript</a></li>
</ol>
<p><a href="Словарь.html">Словарь</a></p>

<p><a href="Общее.html">Общее</a></p>

<p><a href="Как_я_ставил_pma.html">Как я ставил pma</a></p>

<p><a href="php.html">php</a></p>

<ol>
<li><a href="php--Вопросы.html">Вопросы</a></li>
<li><a href="php--debug.html">debug</a></li>
<li><a href="php--Форма.html">Форма</a></li>
<li><a href="php--Основы.html">Основы</a></li>
<ol>
<li><a href="php--Основы--Переменные.html">Переменные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Локальные.html">Локальные</a></li>
<li><a href="php--Основы--Переменные--Глобальные.html">Глобальные</a></li>
<li><a href="php--Основы--Переменные--Статические.html">Статические</a></li>
<li><a href="php--Основы--Переменные--Суперглобальные.html">Суперглобальные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Суперглобальные--$_SESSION_and_$_COOKIE.html">$_SESSION and $_COOKIE</a></li>
</ol>
</ol>
<li><a href="php--Основы--Функции.html">Функции</a></li>
<li><a href="php--Основы--Объекты.html">Объекты</a></li>
</ol>
<li><a href="php--MYSQL.html">MYSQL</a></li>
<ol>
<li><a href="php--MYSQL--Начало_работы.html">Начало работы</a></li>
<li><a href="php--MYSQL--Типы_данных.html">Типы данных</a></li>
<li><a href="php--MYSQL--Добавление_данных.html">Добавление данных</a></li>
<li><a href="php--MYSQL--Работа_с_таблицей.html">Работа с таблицей</a></li>
<li><a href="php--MYSQL--Индекс.html">Индекс</a></li>
<li><a href="php--MYSQL--Запросы_к_Базе_Данных.html">Запросы к Базе Данных</a></li>
</ol>
<li><a href="php--PHP_и_MySQL.html">PHP и MySQL</a></li>
</ol></div>
<div class="page"><h1><b><u>Первый xhr</u></b></h1>    &lt;script&gt;<br />        ;(function() {<br /><br />            const subForm = document.querySelector('.form-sub');<br />            console.log(subForm);<br /><br />            subForm.addEventListener('submit', function(e) {<br /><br />                e.preventDefault();<br /><br />                var xhr = new XMLHttpRequest();<br /><br />                xhr.open('POST', './mail.php');<br />                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')<br /><br />                xhr.onload = function() {<br />    <br />                    if ( xhr.status === 200 ) {<br />                        console.log(1);<br />                        console.log(this.responseText);<br />                    } else {<br />                        console.log(2);<br />                        console.log(this.responseText);<br />                    }<br />                };<br /><br />                xhr.send('email=' + document.querySelector('input').value);<br />            })<br /><br />        })();<br />    &lt;/script&gt;<br />    <br />    <br />    <br />    &lt;form class="form-sub"&gt;<br />                    &lt;input class="input" type="email" name="" placeholder="Your mail"&gt;<br />                    &lt;button class="button sub-button" type="submit"&gt;Subscribe&lt;/button&gt;<br />                &lt;/form&gt;<br /><br /><br /><br /><br />&lt;?php<br />var_dump($_POST['email']);<br /><br />if ( isset($_POST['email']) ) {<br />    $email = trim($_POST['email']);<br /><br />    if ( empty($email) ) {<br />       echo 'Вы заполнили не все поля!';<br />    }<br /><br />    else {<br />        $mailto = 'behemothoz@yandex.ru';<br />        $subject = 'Тема';<br />        $message  = 'Сообщение от пользователя &lt;b&gt;';<br />        // $message .= 'E-mail пользователя: &lt;a href="mailto:' . $email . '"&gt;' . $email . '&lt;/a&gt;&lt;br /&gt;';<br />        $headers = 'Content-type: text/html; charset=utf-8';<br /><br />        $mail = mail($mailto, $subject, $message, $headers);<br /><br />        if ( !$mail ) {<br />            echo 'Ваше сообщение успешно отправлено!';<br />        }<br /><br />        else {<br />            http_response_code(403);<br />            echo 'Произошла ошибка при отправке сообщения.';<br />        }<br /><br />    }<br />} else {<br />    echo 'asdasd';<br />}<br /><br />?&gt;</div></div>
</body></html>