<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>JS Шаблоны (Массивы)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="Baner.html">Baner</a></p>

<ol>
<li><a href="Baner--Время_и_з-п.html">Время и з/п</a></li>
</ol>
<p><a href="JavaScript.html">JavaScript</a></p>

<ol>
<li><a href="JavaScript--JS_Шаблоны_(Объекты).html">JS Шаблоны (Объекты)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов).html">JS Шаблоны (Шаблоны создания объектов)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов)--Пространство_имен.html">Пространство имен</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Обертки).html">JS Шаблоны (Обертки)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Массивы).html">JS Шаблоны (Массивы)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Определения).html">JS Шаблоны (Функции / Определения)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа).html">JS Шаблоны (Функции / Работа)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Функции_обратного_вызова.html">Функции обратного вызова</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Возврат_функции.html">Возврат функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Самоопределяемые_функции.html">Самоопределяемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Немедленно_вызываемые_функции.html">Немедленно вызываемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Значения,_возвращаемые_немедленно_вызываемыми_функциями.html">Значения, возвращаемые немедленно вызываемыми функциями</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Примеры).html">JS Шаблоны (Функции / Примеры)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(JSON).html">JS Шаблоны (JSON)</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом.html">Работа с DOM деревом</a></li>
<ol>
<li><a href="JavaScript--Работа_с_DOM_деревом--Перемещение_DOM_элементов.html">Перемещение DOM элементов</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом--Создание_DOM_элементов.html">Создание DOM элементов</a></li>
</ol>
<li><a href="JavaScript--Шаблонизация.html">Шаблонизация</a></li>
<li><a href="JavaScript--Конструкторы_и_прототипы.html">Конструкторы и прототипы</a></li>
<li><a href="JavaScript--AJAX.html">AJAX</a></li>
<ol>
<li><a href="JavaScript--AJAX--JSONP.html">JSONP</a></li>
</ol>
<li><a href="JavaScript--!Мысли.html">!Мысли</a></li>
<li><a href="JavaScript--style_js.html">style js</a></li>
<li><a href="JavaScript--console.time.html">console.time</a></li>
<li><a href="JavaScript--documentFragment.html">documentFragment</a></li>
<li><a href="JavaScript--WebWorker.html">WebWorker</a></li>
<li><a href="JavaScript--Вопросы.html">Вопросы</a></li>
<li><a href="JavaScript--Первый_xhr.html">Первый xhr</a></li>
</ol>
<p><a href="JavaScript2015(ES6).html">JavaScript2015(ES6)</a></p>

<ol>
<li><a href="JavaScript2015(ES6)--let_-_const.html">let / const</a></li>
<li><a href="JavaScript2015(ES6)--template_literals.html">template literals</a></li>
<li><a href="JavaScript2015(ES6)--Функции.html">Функции</a></li>
</ol>
<p><a href="Верстка.html">Верстка</a></p>

<ol>
<li><a href="Верстка--Приемы.html">Приемы</a></li>
<ol>
<li><a href="Верстка--Приемы--Многоточие_для_текста.html">Многоточие для текста</a></li>
<li><a href="Верстка--Приемы--Скрыть_текст.html">Скрыть текст</a></li>
</ol>
</ol>
<p><a href="Полезные_ссылки.html">Полезные ссылки</a></p>

<ol>
<li><a href="Полезные_ссылки--Верстка.html">Верстка</a></li>
<ol>
<li><a href="Полезные_ссылки--Верстка--Online_инструменты.html">Online инструменты</a></li>
</ol>
<li><a href="Полезные_ссылки--JavaScript.html">JavaScript</a></li>
</ol>
<p><a href="Словарь.html">Словарь</a></p>

<p><a href="Общее.html">Общее</a></p>

<p><a href="Как_я_ставил_pma.html">Как я ставил pma</a></p>

<p><a href="php.html">php</a></p>

<ol>
<li><a href="php--Вопросы.html">Вопросы</a></li>
<li><a href="php--debug.html">debug</a></li>
<li><a href="php--Форма.html">Форма</a></li>
<li><a href="php--Основы.html">Основы</a></li>
<ol>
<li><a href="php--Основы--Переменные.html">Переменные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Локальные.html">Локальные</a></li>
<li><a href="php--Основы--Переменные--Глобальные.html">Глобальные</a></li>
<li><a href="php--Основы--Переменные--Статические.html">Статические</a></li>
<li><a href="php--Основы--Переменные--Суперглобальные.html">Суперглобальные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Суперглобальные--$_SESSION_and_$_COOKIE.html">$_SESSION and $_COOKIE</a></li>
</ol>
</ol>
<li><a href="php--Основы--Функции.html">Функции</a></li>
<li><a href="php--Основы--Объекты.html">Объекты</a></li>
</ol>
<li><a href="php--MYSQL.html">MYSQL</a></li>
<ol>
<li><a href="php--MYSQL--Начало_работы.html">Начало работы</a></li>
<li><a href="php--MYSQL--Типы_данных.html">Типы данных</a></li>
<li><a href="php--MYSQL--Добавление_данных.html">Добавление данных</a></li>
<li><a href="php--MYSQL--Работа_с_таблицей.html">Работа с таблицей</a></li>
<li><a href="php--MYSQL--Индекс.html">Индекс</a></li>
<li><a href="php--MYSQL--Запросы_к_Базе_Данных.html">Запросы к Базе Данных</a></li>
</ol>
<li><a href="php--PHP_и_MySQL.html">PHP и MySQL</a></li>
</ol></div>
<div class="page"><h1><b><u>JS Шаблоны (Массивы)</u></b></h1>Создание массива<br /><br />1. Литерал: <strong>var arr = []</strong>;<br />2. Конструктор: v<strong>ar arr = new Array()</strong>; - нежелательно<br />Если передать единственный параметр в констурктор <strong>new Array()</strong> - это будет длина массива,<br />если больше - это элементы массива.<br /><br /><strong>Массив - это объект</strong>!<br /><br />Проверка на то, что это массив: <strong>Array.isArray( </strong>*значение для проверки*<strong> )</strong>;<br />Если метод выше не поддерживается:<br /><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">if</span>&nbsp;(<span style="color:#000000;font-weight:700">typeof</span>&nbsp;<span style="color:#8ae234;font-weight:700">Array</span>.isArray&nbsp;===&nbsp;“<span style="color:#ce5c00;font-weight:400">undefined</span>”)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#8ae234;font-weight:700">Array</span>.isArray&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;(arg)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;<span style="color:#8ae234;font-weight:700">Object</span>.prototype.<span style="color:#729fcf;font-weight:400">toString</span>.<span style="color:#729fcf;font-weight:400">call</span>(arg)&nbsp;===&nbsp;“[object&nbsp;<span style="color:#8ae234;font-weight:700">Array</span>]”;<br />&nbsp;&nbsp;&nbsp;&nbsp;};<br />}<br /></div></div><br /><br /><br /><strong>Итераторы по массиву</strong><br /><br /><span style="background-color:#ffff00;text-decoration:underline;">1. </span><strong><span style="color:#a52a2a;background-color:#ffff00;text-decoration:underline;">forEach</span></strong><br /><br />Прямой перебор по элементам массива (важно: перебор!)<br /><br />Д<span style="color:#000000;background-color:#ffffff;">ля каждого элемента массива вызывает функцию </span><span style="color:#000000;">callback</span>.<br />Этой функции он передаёт три параметра <strong>callback(item, i, arr):</strong><br />• item – очередной элемент массива.<br />• i – его номер.<br />• arr – массив, который перебирается.<br /><br />Например:<br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;arr&nbsp;=&nbsp;[<span style="color:#edd400;font-weight:400">"Яблоко"</span>,&nbsp;<span style="color:#edd400;font-weight:400">"Апельсин"</span>,&nbsp;<span style="color:#edd400;font-weight:400">"Груша"</span>];<br /><br />arr.forEach(<span style="color:#000000;font-weight:700">function</span>(item,&nbsp;i,&nbsp;arr)&nbsp;{<br />&nbsp;&nbsp;alert(&nbsp;i&nbsp;+&nbsp;<span style="color:#edd400;font-weight:400">":&nbsp;"</span>&nbsp;+&nbsp;item&nbsp;+&nbsp;<span style="color:#edd400;font-weight:400">"&nbsp;(массив:"</span>&nbsp;+&nbsp;arr&nbsp;+&nbsp;<span style="color:#edd400;font-weight:400">")"</span>&nbsp;);<br />});</div></div><br /><br />Второй, необязательный аргумент forEach позволяет указать контекст this для callback. <br /><strong>Метод forEach ничего не возвращает, его используют только для перебора, как более «элегантный» <br />вариант, чем обычный цикл for.</strong><br /><br /><br /><span style="background-color:#ffff00;text-decoration:underline;">2. </span><strong><span style="color:#a52a2a;background-color:#ffff00;text-decoration:underline;">filter</span></strong><br /><br />Используется <strong>для фильтрации массива через функцию.</strong><br /><br />Он создаёт новый массив, в который войдут только те элементы arr, для которых <br /><strong>вызов callback(item, i, arr)возвратит true</strong>.<br /><br />Например:<br /><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;arr&nbsp;=&nbsp;[<span style="color:#edd400;font-weight:400">1</span>,&nbsp;-<span style="color:#edd400;font-weight:400">1</span>,&nbsp;<span style="color:#edd400;font-weight:400">2</span>,&nbsp;-<span style="color:#edd400;font-weight:400">2</span>,&nbsp;<span style="color:#edd400;font-weight:400">3</span>];<br /><br /><span style="color:#000000;font-weight:700">var</span>&nbsp;positiveArr&nbsp;=&nbsp;arr.filter(<span style="color:#000000;font-weight:700">function</span>(number)&nbsp;{<br />&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;number&nbsp;&gt;&nbsp;<span style="color:#edd400;font-weight:400">0</span>;<br />});<br /><br />alert(&nbsp;positiveArr&nbsp;);&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;1,2,3</span><br /></div></div><br /><br /><br /><span style="background-color:#ffff00;text-decoration:underline;">3. </span><strong><span style="color:#a52a2a;background-color:#ffff00;text-decoration:underline;">map</span></strong><span style="background-color:#ffff00;text-decoration:underline;"> (мапирование)</span><br /><br /><span style="color:#000000;background-color:#ffffff;">Он </span><strong><span style="color:#000000;background-color:#ffffff;">создаёт новый массив</span></strong><span style="color:#000000;background-color:#ffffff;">, который будет состоять из результатов вызова </span><span style="color:#000000;">callback(item, i, arr)</span><span style="color:#000000;background-color:#ffffff;"> </span><span style="color:#000000;">для каждого элемента arr</span><span style="color:#000000;background-color:#ffffff;">.</span><br /><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;names&nbsp;=&nbsp;[<span style="color:#edd400;font-weight:400">'HTML'</span>,&nbsp;<span style="color:#edd400;font-weight:400">'CSS'</span>,&nbsp;<span style="color:#edd400;font-weight:400">'JavaScript'</span>];<br /><br /><span style="color:#000000;font-weight:700">var</span>&nbsp;nameLengths&nbsp;=&nbsp;names.map(<span style="color:#000000;font-weight:700">function</span>(<span style="color:#000000;font-weight:700">name</span>)&nbsp;{<br />&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;<span style="color:#000000;font-weight:700">name</span>.<span style="color:#000000;font-weight:700">length</span>;<br />});<br /><br /><span style="color:#888a85;font-weight:400">//&nbsp;получили&nbsp;массив&nbsp;с&nbsp;длинами</span><br />alert(&nbsp;nameLengths&nbsp;);&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;4,3,10</span></div></div><br /><br /><br /><span style="background-color:#ffff00;text-decoration:underline;">4. </span><strong><span style="color:#a52a2a;background-color:#ffff00;text-decoration:underline;">every / some</span></strong><br /><br />Возвращают true / false<br /><br /><strong>Методы проверки массивов.</strong> <br /><strong>Some</strong> <strong>проверяет</strong> соответсвует ли <strong>хотя бы один элемент</strong> массива некоему условию.<br /><strong>Every</strong> - аналогичен, но <strong>проверяет все элементы</strong>.<br /><br />Итератор <strong>some</strong> возвращает true / false на каждой итерации<br />Как только итератор вернул true, итератор прекращает работу и возвращает true.<br />(Например, если на первой итерации - true - то работа прекращается и последующих<br />итераций не будет)<br />Иначе, если ни на одном шаге не вренется true, вернется false.<br /><br />********<br /><strong>Every</strong> работает аналогично some. Но логика обратна.<br />Он работает до тех пор, пока функция возвращает true.<br /><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;arr&nbsp;=&nbsp;[<span style="color:#edd400;font-weight:400">1</span>,&nbsp;-<span style="color:#edd400;font-weight:400">1</span>,&nbsp;<span style="color:#edd400;font-weight:400">2</span>,&nbsp;-<span style="color:#edd400;font-weight:400">2</span>,&nbsp;<span style="color:#edd400;font-weight:400">3</span>];<br /><br /><span style="color:#000000;font-weight:700">function</span>&nbsp;isPositive(number)&nbsp;{<br />&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;number&nbsp;&gt;&nbsp;<span style="color:#edd400;font-weight:400">0</span>;<br />}<br /><br />alert(&nbsp;arr.every(isPositive)&nbsp;);&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;false,&nbsp;не&nbsp;все&nbsp;положительные</span><br />alert(&nbsp;arr.some(isPositive)&nbsp;);&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;true,&nbsp;есть&nbsp;хоть&nbsp;одно&nbsp;положительное</span></div></div><br /><br /><br /><strong><span style="color:#a52a2a;background-color:#ffff00;text-decoration:underline;">5. reduce / reduceRight</span></strong><br /><br /><strong>Используется для последовательной обработки каждого элемента массива <br />с сохранением промежуточного результата.</strong><br /><br />('свертывание массива' или представить массив одним значением)<br /><br />Метод reduce используется для вычисления на основе массива какого-либо <br />единого значения, иначе говорят «для свёртки массива». <br /><br />Он применяет функцию callback <strong>по очереди к каждому элементу массива слева направо</strong>, <br />сохраняя при этом промежуточный результат.<br /><br /><strong>Аргументы</strong> функции callback(previousValue, currentItem, index, arr):<br />• <span style="color:#ffa500;">previousValue</span> – последний результат вызова функции, он же «промежуточный результат».<br />• <span style="color:#ffa500;">currentItem</span> – текущий элемент массива, элементы перебираются по очереди слева-направо.<br />•<span style="color:#ffa500;"> index</span> – номер текущего элемента.<br />• <span style="color:#ffa500;">arr</span> – обрабатываемый массив.<br /><br />Кроме callback, методу можно передать «начальное значение» – аргумент <span style="color:#ffa500;">initialValue</span>. <br />Если он есть, то на первом вызове значение previousValue будет равно initialValue,<br />а если у reduce нет второго аргумента, то оно равно первому элементу массива, а перебор начинается со второго.<br /><br />Проще всего понять работу метода reduce на примере.<br />Например, в качестве «свёртки» мы хотим получить сумму всех элементов массива.<br />Вот решение в одну строку:<br /><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;arr&nbsp;=&nbsp;[<span style="color:#edd400;font-weight:400">1</span>,&nbsp;<span style="color:#edd400;font-weight:400">2</span>,&nbsp;<span style="color:#edd400;font-weight:400">3</span>,&nbsp;<span style="color:#edd400;font-weight:400">4</span>,&nbsp;<span style="color:#edd400;font-weight:400">5</span>]<br /><br /><span style="color:#888a85;font-weight:400">//&nbsp;для&nbsp;каждого&nbsp;элемента&nbsp;массива&nbsp;запустить&nbsp;функцию,</span><br /><span style="color:#888a85;font-weight:400">//&nbsp;промежуточный&nbsp;результат&nbsp;передавать&nbsp;первым&nbsp;аргументом&nbsp;далее</span><br /><span style="color:#000000;font-weight:700">var</span>&nbsp;result&nbsp;=&nbsp;arr.reduce(<span style="color:#000000;font-weight:700">function</span>(sum,&nbsp;current)&nbsp;{<br />&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;sum&nbsp;+&nbsp;current;<br />},&nbsp;<span style="color:#edd400;font-weight:400">0</span>);<br /><br />alert(&nbsp;result&nbsp;);&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;15</span></div></div><br /><br />При первом запуске sum – исходное значение, с которого начинаются вычисления, <br />равно нулю (второй аргумент reduce).<br />Сначала анонимная функция вызывается с этим начальным значением и первым элементом массива, <br />результат запоминается и передаётся в следующий вызов, уже со вторым аргументом массива, <br />затем новое значение участвует в вычислениях с третьим аргументом и так далее.<br /><br /></div></div>
</body></html>