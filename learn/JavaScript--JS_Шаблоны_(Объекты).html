<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>JS Шаблоны (Объекты)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><strong>Index</strong></p>
<p><a href="Baner.html">Baner</a></p>

<ol>
<li><a href="Baner--Время_и_з-п.html">Время и з/п</a></li>
</ol>
<p><a href="JavaScript.html">JavaScript</a></p>

<ol>
<li><a href="JavaScript--JS_Шаблоны_(Объекты).html">JS Шаблоны (Объекты)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов).html">JS Шаблоны (Шаблоны создания объектов)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Шаблоны_создания_объектов)--Пространство_имен.html">Пространство имен</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Обертки).html">JS Шаблоны (Обертки)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Массивы).html">JS Шаблоны (Массивы)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Определения).html">JS Шаблоны (Функции / Определения)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа).html">JS Шаблоны (Функции / Работа)</a></li>
<ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Функции_обратного_вызова.html">Функции обратного вызова</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Возврат_функции.html">Возврат функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Самоопределяемые_функции.html">Самоопределяемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Немедленно_вызываемые_функции.html">Немедленно вызываемые функции</a></li>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Работа)--Значения,_возвращаемые_немедленно_вызываемыми_функциями.html">Значения, возвращаемые немедленно вызываемыми функциями</a></li>
</ol>
<li><a href="JavaScript--JS_Шаблоны_(Функции_-_Примеры).html">JS Шаблоны (Функции / Примеры)</a></li>
<li><a href="JavaScript--JS_Шаблоны_(JSON).html">JS Шаблоны (JSON)</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом.html">Работа с DOM деревом</a></li>
<ol>
<li><a href="JavaScript--Работа_с_DOM_деревом--Перемещение_DOM_элементов.html">Перемещение DOM элементов</a></li>
<li><a href="JavaScript--Работа_с_DOM_деревом--Создание_DOM_элементов.html">Создание DOM элементов</a></li>
</ol>
<li><a href="JavaScript--Шаблонизация.html">Шаблонизация</a></li>
<li><a href="JavaScript--Конструкторы_и_прототипы.html">Конструкторы и прототипы</a></li>
<li><a href="JavaScript--AJAX.html">AJAX</a></li>
<ol>
<li><a href="JavaScript--AJAX--JSONP.html">JSONP</a></li>
</ol>
<li><a href="JavaScript--!Мысли.html">!Мысли</a></li>
<li><a href="JavaScript--style_js.html">style js</a></li>
<li><a href="JavaScript--console.time.html">console.time</a></li>
<li><a href="JavaScript--documentFragment.html">documentFragment</a></li>
<li><a href="JavaScript--WebWorker.html">WebWorker</a></li>
<li><a href="JavaScript--Вопросы.html">Вопросы</a></li>
<li><a href="JavaScript--Первый_xhr.html">Первый xhr</a></li>
</ol>
<p><a href="JavaScript2015(ES6).html">JavaScript2015(ES6)</a></p>

<ol>
<li><a href="JavaScript2015(ES6)--let_-_const.html">let / const</a></li>
<li><a href="JavaScript2015(ES6)--template_literals.html">template literals</a></li>
<li><a href="JavaScript2015(ES6)--Функции.html">Функции</a></li>
</ol>
<p><a href="Верстка.html">Верстка</a></p>

<ol>
<li><a href="Верстка--Приемы.html">Приемы</a></li>
<ol>
<li><a href="Верстка--Приемы--Многоточие_для_текста.html">Многоточие для текста</a></li>
<li><a href="Верстка--Приемы--Скрыть_текст.html">Скрыть текст</a></li>
</ol>
</ol>
<p><a href="Полезные_ссылки.html">Полезные ссылки</a></p>

<ol>
<li><a href="Полезные_ссылки--Верстка.html">Верстка</a></li>
<ol>
<li><a href="Полезные_ссылки--Верстка--Online_инструменты.html">Online инструменты</a></li>
</ol>
<li><a href="Полезные_ссылки--JavaScript.html">JavaScript</a></li>
</ol>
<p><a href="Словарь.html">Словарь</a></p>

<p><a href="Общее.html">Общее</a></p>

<p><a href="Как_я_ставил_pma.html">Как я ставил pma</a></p>

<p><a href="php.html">php</a></p>

<ol>
<li><a href="php--Вопросы.html">Вопросы</a></li>
<li><a href="php--debug.html">debug</a></li>
<li><a href="php--Форма.html">Форма</a></li>
<li><a href="php--Основы.html">Основы</a></li>
<ol>
<li><a href="php--Основы--Переменные.html">Переменные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Локальные.html">Локальные</a></li>
<li><a href="php--Основы--Переменные--Глобальные.html">Глобальные</a></li>
<li><a href="php--Основы--Переменные--Статические.html">Статические</a></li>
<li><a href="php--Основы--Переменные--Суперглобальные.html">Суперглобальные</a></li>
<ol>
<li><a href="php--Основы--Переменные--Суперглобальные--$_SESSION_and_$_COOKIE.html">$_SESSION and $_COOKIE</a></li>
</ol>
</ol>
<li><a href="php--Основы--Функции.html">Функции</a></li>
<li><a href="php--Основы--Объекты.html">Объекты</a></li>
</ol>
<li><a href="php--MYSQL.html">MYSQL</a></li>
<ol>
<li><a href="php--MYSQL--Начало_работы.html">Начало работы</a></li>
<li><a href="php--MYSQL--Типы_данных.html">Типы данных</a></li>
<li><a href="php--MYSQL--Добавление_данных.html">Добавление данных</a></li>
<li><a href="php--MYSQL--Работа_с_таблицей.html">Работа с таблицей</a></li>
<li><a href="php--MYSQL--Индекс.html">Индекс</a></li>
<li><a href="php--MYSQL--Запросы_к_Базе_Данных.html">Запросы к Базе Данных</a></li>
</ol>
<li><a href="php--PHP_и_MySQL.html">PHP и MySQL</a></li>
</ol></div>
<div class="page"><h1><b><u>JS Шаблоны (Объекты)</u></b></h1><strong><h3>Объекты!</h3></strong><br /><br /><strong>В Java­Script нет пустых объектов.</strong> Даже простейший объект {} уже имеет свойства и методы, <br />унаследованные от Object.prototype. Под «пустым» мы будем подразумевать объект, <br />не имеющий других свойств, кроме унаследованных.<br /><br /><strong>Основные правила синтаксиса литералов объектов:</strong><br />• Определение объекта заключается в фигурные скобки { и }.<br />• Определения свойств и  методов внутри объекта разделяются запятыми. <br />• После последней пары имя-значение допускается добавлять последнюю запятую, однако она будет <br />вызывать ошибку в IE, поэтому не используйте ее.<br />• Имена свойств отделяются от значений двоеточиями.<br />• При присваивании литерала объекта переменной не забудьте точку с запятой после закрывающей скобки }.<br /><br /><br />Одна из возможных реализаций функции-конструк­тора Person.<br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;Person&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;(<span style="color:#000000;font-weight:700">name</span>)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">this</span>.<span style="color:#000000;font-weight:700">name</span>&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">name</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">this</span>.say&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;“I&nbsp;am&nbsp;“&nbsp;+&nbsp;<span style="color:#000000;font-weight:700">this</span>.<span style="color:#000000;font-weight:700">name</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;};<br />};</div></div><br /><br /><strong>При вызове функции-конструктора с  оператором new внутри функции<br />происходит следующее:</strong><br />• Создается пустой объект, наследующий свойства и методы прототипа функции, и ссылка на него <br />сохраняется в переменой this.<br />• Добавление новых свойств и методов в объект осуществляется с помощью ссылки this.<br />• В конце функция неявно возвращает объект, на который ссылается переменная this <br />(если явно не возвращается никакой другой объект).<br /><br />Вот как примерно выглядит то, что происходит <strong>за кулисами:</strong><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;Person&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;(<span style="color:#000000;font-weight:700">name</span>)&nbsp;{<br /><span style="color:#888a85;font-weight:400">//&nbsp;создается&nbsp;пустой&nbsp;объект</span><br /><span style="color:#888a85;font-weight:400">//&nbsp;с&nbsp;использованием&nbsp;литерала</span><br /><span style="color:#888a85;font-weight:400">//&nbsp;var&nbsp;this&nbsp;=&nbsp;{};</span><br /><span style="color:#888a85;font-weight:400">//&nbsp;добавляются&nbsp;свойства&nbsp;и&nbsp;методы</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">this</span>.<span style="color:#000000;font-weight:700">name</span>&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">name</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">this</span>.say&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;“I&nbsp;am&nbsp;“&nbsp;+&nbsp;<span style="color:#000000;font-weight:700">this</span>.<span style="color:#000000;font-weight:700">name</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span style="color:#888a85;font-weight:400">//&nbsp;return&nbsp;this;</span><br />};</div></div><br /><br />Для простоты примера метод say() был добавлен к  ссылке this. В  результате при каждом вызове конструктора <br />new Person() в памяти будет создаваться новая функция. Совершенно очевидно, что это <br />неэкономный подход к  расходованию памяти, потому что реализация метода say() не изменяется от одного <br />экземпляра к другому. Эффективнее было бы добавить метод к прототипу функции Person:<br /><br /><div class="codebox"><div class="codebox">Person.prototype.say&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;“I&nbsp;am&nbsp;“&nbsp;+&nbsp;<span style="color:#000000;font-weight:700">this</span>.<span style="color:#000000;font-weight:700">name</span>;<br />};</div></div><br /><br />Существует еще кое-что заслуживающее упоминания для полноты картины. Выше было сказано, что внутри конструктора, <br />за кулисами, выполняется такая операция:<br /><br />// <strong>var this = {};</strong><br /><br />Это не совсем так, потому что «пустой» объект в  действительности не является пустым – он наследует <br />свойства и методы от прототипа функции Person. То есть точнее было бы эту операцию представить так:<br /><br />// <strong>var this = Object.create(Person.prototype);</strong><br /><br /><br />При вызове с оператором new функция-конструктор всегда возвращает объект. По умолчанию это объект, <br />на который указывает ссылка this. <br />Если внутри конструктора к  нему не добавляются никакие свойства, возвращается «пустой» объект («пустой», <br />если не считать свойства и методы, унаследованные от прототипа конструктора).<br />Конструкторы неявно возвращают значение this, даже если в  них отсутствует инструкция return. <br />Однако за программистом сохраняется возможность вернуть любой другой объект по своему выбору. <br />В следующем примере создается и возвращается новый объект, на который ссылается переменная <strong>that</strong>.<br /><br /><div class="codebox"><div class="codebox"><span style="color:#000000;font-weight:700">var</span>&nbsp;Objectmaker&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">function</span>&nbsp;()&nbsp;{<br /><span style="color:#888a85;font-weight:400">//&nbsp;это&nbsp;свойство&nbsp;`name`&nbsp;будет&nbsp;проигнорировано,</span><br /><span style="color:#888a85;font-weight:400">//&nbsp;потому&nbsp;что&nbsp;конструктор</span><br /><span style="color:#888a85;font-weight:400">//&nbsp;возвращает&nbsp;совсем&nbsp;другой&nbsp;объект</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">this</span>.<span style="color:#000000;font-weight:700">name</span>&nbsp;=&nbsp;“This&nbsp;is&nbsp;it”;<br /><span style="color:#888a85;font-weight:400">//&nbsp;создать&nbsp;и&nbsp;вернуть&nbsp;новый&nbsp;объект</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">var</span>&nbsp;that&nbsp;=&nbsp;{};<br />&nbsp;&nbsp;&nbsp;&nbsp;that.<span style="color:#000000;font-weight:700">name</span>&nbsp;=&nbsp;“And&nbsp;that’s&nbsp;that”;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#000000;font-weight:700">return</span>&nbsp;that;<br />};<br /><br /><span style="color:#888a85;font-weight:400">//&nbsp;проверка</span><br /><span style="color:#000000;font-weight:700">var</span>&nbsp;o&nbsp;=&nbsp;<span style="color:#000000;font-weight:700">new</span>&nbsp;Objectmaker();<br />console.<span style="color:#729fcf;font-weight:400">log</span>(o.<span style="color:#000000;font-weight:700">name</span>);&nbsp;<span style="color:#888a85;font-weight:400">//&nbsp;“And&nbsp;that’s&nbsp;that”</span></div></div><br /><br />Как видите, всегда есть возможность вернуть из конструктора любой объект при условии, что это действительно объект.<br />Попытка вернуть что-то другое, не являющееся объектом (например, строку или логическое значение false), <br />не будет рассматриваться как ошибка, но она будет проигнорирована, и конструктор вернет объект, на который указывает<br />ссылка this.<br /><br /><strong>Что произойдет, если забыть добавить оператор new при вызове конструктора?</strong> <br />Это не будет рассматриваться интерпретатором как ошибка, но может привести к логической ошибке и <br />к неожиданным результатам. Если вызвать конструктор без оператора new, ссылка this внутри конструктора будет<br />указывать на глобальный объект. (В броузерах ссылка this будет указывать на объект window.)</div></div>
</body></html>