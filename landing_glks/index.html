<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Document</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Righteous" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/normalize.css@8.0.1/normalize.css" />
  <link rel="stylesheet" href="./css/style.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body class="body">
  <div class="planet"></div>
  <div class="planet planet-small planet-small-1"></div>
  <div class="planet planet-small planet-small-2"></div>
  <div class="planet planet-small planet-small-3"></div>

  <nav class="nav">
    <a href="https://galaksion.com">
      <img src="./img/gLogoWhiteText.svg" alt="logo" class="logo" />
    </a>
    <a href="https://ssp.galaksion.com" class="login">LOGIN</a>
  </nav>

  <section class="hero">
    <div class="header">
      <header class="title">Welcome to the galaxy <br /> of high cpm</header>
    </div>
    <img id="rocket" src="./img/rocket.svg" alt="Rocket" class="rocket" />
  </section>

  <section class="main">
    <div class="header">
      <h2 class="title">This is houston. <br /> You are go for staging.</h2>
      <img src="./img/cosmonaut.svg" alt="Cosmonaut" class="cosmonaut" />
    </div>

    <form id="form" class="form">
      <div class="field">
        <input id="email" name="email" type="email" required>
        <label for="email">Email *</label>
      </div>
      <div class="field">
        <input id="password" name="password" type="password" required>
        <label for="password">Password *</label>
      </div>
      <div class="field">
        <input id="website" name="website" type="text">
        <label for="website">Website</label>
      </div>
      <div class="field">
        <input id="promo_code" name="promo_code" type="text">
        <label for="promo_code">Promo code</label>
      </div>
      <!-- <button type="submit">REGISTER</button> -->
      <button type="submit" class="popup-btn">REGISTER</button>
    </form>
  </section>

  <div class="popup-overlay">
    <div class="popup">
      <h2 class="popup-title">Registration complete</h2>
      <p class="popup-desc">
        We just sent you a confirmation email to<br>
        <b class="pass-email">email@galaxion.com</b><br>
        Please check your inbox for account verification.<br>
        It my take up to 5 minutes to deliver the email.<br>
        Check the spam folder as well if there is nothing in inbox.<br>
      </p>
      <button class="popup-close">Ok</button>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-content">
      <div class="item">
        <img src="./img/icon12.png" alt="Address" />
        <p>Krisjana Valdemara 63 Riga, Latvia, LV LV-1010</p>
      </div>
      <div class="item">
        <img src="./img/icon13.png" alt="Phone" />
        <a href="tel:+37125653289">+37125653289</a>
      </div>
      <div class="item">
        <img src="./img/icon14.png" alt="Email" />
        <a href="mailto:info@galaksion.com">info@galaksion.com</p>
      </div>
    </div>
    <div class="footer-content">
      <p class="copyright">&copy; 2018. All rights reserved.</p>
    </div>
  </footer>

  <script src="./pg.js"></script>
  <script>
    particleground(document.body, {
      dotColor: 'rgba(0, 156, 219, 0.6)',
      lineColor: 'transparent',
      parallax: false,
      minSpeedX: 0.2,
      maxSpeedX: 0.5,
      minSpeedY: 0.2,
      maxSpeedY: 0.5,
      density: 25000,
      particleRadius: 4,
      lineWidth: 0,
      onInit: function () {
        const canvas = this.querySelector('canvas.pg-canvas');
        canvas.style.position = 'fixed';
        canvas.style.zIndex = '-1';
      }
    });
  </script>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // const form = document.getElementById('form');

      // let fetching = false;

      // const onSubmit = event => {
      //   event.preventDefault();
      //   if (fetching) return;
      //   fetching = true;
      //   let data = $(form).serializeArray();
      //   data.push({
      //     name: 'location',
      //     value: encodeURIComponent(window.location || '')
      //   });
      //   const search = window.location.search || '';

      //   data.push({
      //     name: 'params',
      //     value: search
      //       .split('&')
      //       .filter(el => el)
      //       .reduce((acc, item, index) => {
      //         const el = item.split('=');
      //         if (el[0] && el[0][0] === '?' && index === 0) {
      //           return Object.assign(acc, {
      //             [el[0].slice(1)]: el[1],
      //           });
      //         }
      //         return Object.assign(acc, {
      //           [el[0]]: el[1],
      //         });
      //       }, {}),
      //   });

      //   data = data.reduce((acc, item) => Object.assign(acc, { [item.name]: item.value }), {});
      //   const url = '[[SUBMIT_URL]]'.replace('{SUBMIT_DATA}', encodeURIComponent(JSON.stringify(data)));
      //   const gtag = window.gtag;

      //   if (gtag && typeof gtag === "function") {
      //     gtag('event', 'send', {
      //       'event_category': 'lead',
      //       'event_action': 'lead_submit_request'
      //     });
      //   }

      //   fetch(url)
      //     .then(() => {
      //       if (gtag && typeof gtag === "function") {
      //         gtag('event', 'send', {
      //           'event_category': 'lead',
      //           'event_action': 'lead_submit_success'
      //         });
      //       }

      //       $(form).find('input[type=text], input[type=email], input[type=url], textarea').val('');
      //       fetching = false;
      //     })
      //     .catch(() => {
      //       if (gtag && typeof gtag === "function") {
      //         gtag('event', 'send', {
      //           'event_category': 'lead',
      //           'event_action': 'lead_submit_error'
      //         });
      //       }

      //       $(form).find('input[type=text], input[type=email], input[type=url], textarea').val('');
      //       fetching = false;
      //     });
      // }

      // form.addEventListener('submit', onSubmit);

      // $("#rocket").click(function() {
      //     $([document.documentElement, document.body]).animate({
      //         scrollTop: $("#form").offset().top - 24
      //     }, 350);
      // });
    });

  </script>
  <script>
    // Ширина полосы прокрутки
    const measureWidthScroll = function () {
        let scrollWidth, div;

        div = document.createElement('div');

        div.style.overflowY = 'scroll';
        div.style.width = '50px';
        div.style.height = '50px';
        div.style.visibility = 'hidden';

        document.body.appendChild(div);
        scrollWidth = div.offsetWidth - div.clientWidth;
        document.body.removeChild(div);

        return scrollWidth;
    };

    (function() {
      const btn = document.querySelector('.popup-btn');
      const body = document.querySelector('.body');
      const overlay = document.querySelector('.popup-overlay');
      const close = document.querySelector('.popup-close');

      const emailInput = document.querySelector('input[type=email]');

      const handleOpenPopup = function(e) {
        e.preventDefault();
        const email = overlay.firstElementChild.querySelector('.pass-email');
        email.textContent = emailInput.value;

        overlay.classList.add('visible');
        overlay.firstElementChild.classList.add('visible');

        body.classList.add('no-scroll');
        body.style.marginRight = measureWidthScroll() + 'px';
      };

      const handleClosePopup = function(e) {
          const el = e.target;

          if (el.classList.contains('visible') &&
              el.classList.contains('popup-overlay')) {

              el.classList.remove('visible');
              el.firstElementChild.classList.remove('visible');

              body.classList.remove('no-scroll');
              body.style.marginRight = '';
          }

          else {
              return false;
          }
      };

      const handleClosePopupOnBtn = function(e) {
        const parent = e.target.parentElement;

        if (parent.classList.contains('popup') &&
            parent.classList.contains('visible')) {

            parent.classList.remove('visible');
            parent.parentElement.classList.remove('visible');

            body.classList.remove('no-scroll');
            body.style.marginRight = '';
        }

        else {
            return false;
        }
    }

      btn.addEventListener('click', handleOpenPopup);
      overlay.addEventListener('click', handleClosePopup);
      close.addEventListener('click', handleClosePopupOnBtn);
    })();

  </script>
</body>

</html>